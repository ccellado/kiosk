package kiosk.oraclepool

import kiosk.ECC
import kiosk.ergo._
import org.scalatest.{Matchers, PropSpec}

class FixedEpochPoolDemo extends PropSpec with FixedEpochPool with Matchers {
  val minBoxValue = 2000000
  override lazy val livePeriod = 5 // blocks
  override lazy val prepPeriod = 5 // blocks
  override lazy val buffer = 4 // blocks

  override lazy val oracleTokenId: Array[Byte] = "12caaacb51c89646fac9a3786eb98d0113bd57d68223ccc11754a4f67281daed".decodeHex
  override lazy val poolTokenId: Array[Byte] = "b662db51cf2dc39f110a021c2a31c74f0a1a18ffffbf73e8a051a7b8c0f09ebc".decodeHex

  override lazy val oracleReward = 2000000 // Nano ergs. One reward per data point to be paid to oracle
  lazy val addresses = Seq(
    "9iHunbPfq8ARpiJXc4vjmwvseeHWjmgeC797vSrdHSLNKxvKsYo",
    "9fj9NJpzo13HfNyCdzyfNP8zAfjiTY3pys1JP5wCzez8MiP8QbF",
    "9ebeQK9oJpDpTZSfqk6wdaHt3x1aUUba9S8dMufTpyQQYvE2XKU",
    "9fcrXXaJgrGKC8iu98Y2spstDDxNccXSR9QjbfTvtuv7vJ3NQLk"
  ).toArray

  override lazy val minPoolBoxValue = oracleReward * (addresses.size + 1) + minBoxValue // how much min must exist in oracle pool box

  property("Display Addresses") {
    println("minPoolBoxValue " + minPoolBoxValue)
    println(s"Live Epoch script length       : ${liveEpochErgoTree.bytes.length}")
    println(s"Live Epoch script complexity   : ${liveEpochErgoTree.complexity}")
    println(s"Epoch prep script length       : ${epochPrepErgoTree.bytes.length}")
    println(s"Epoch prep script complexity   : ${epochPrepErgoTree.complexity}")
    println(s"DataPoint script length        : ${dataPointErgoTree.bytes.length}")
    println(s"DataPoint script complexity    : ${dataPointErgoTree.complexity}")
    println(s"PoolDeposit script length      : ${poolDepositErgoTree.bytes.length}")
    println(s"PoolDeposit script complexity  : ${poolDepositErgoTree.complexity}")

    println("liveEpochAddress: " + liveEpochAddress)
    println("epochPrepAddress: " + epochPrepAddress)
    println("dataPointAddress: " + dataPointAddress)
    println("poolDepositAddress: " + poolDepositAddress)
    println("EpochPrepErgoTree: (for R6) " + KioskErgoTree(epochPrepErgoTree).serialize.encodeHex)

    liveEpochAddress shouldEqual "6By3PvYgScgZTRMU4WghXP3Te4dgS22Es3uWT94RCZG7aastqNDYVE2WVAaVKHUhBJva8d14Xajn9JT8Jy5ZnPoRsFjD4n1Xpep7i6RwYMD4MDKTeoweaR7YeiZGF22tm5pNpKGh6Jb2Z9kH6noczi3cAdr52vp8GEy8edbEmaZtAfvh9m6X5gxEFxeo5DMndV4Pqaj3wwGm5KddCqP4wUfR8hX9BRTj7Eop5D45wGNkHguwfQvyAa43eqnwBdmnYnxVuEqvZu4cq6gJmeEvFCrg843ZtteuDF5Pzhw1vvXb4jQGgi7WfsA6SwT8t8BWyoWYHA1wXCFnAfwgvM5UCAi3184VCZtEWYq98AaqyTYCFFVCrj2z8ZGGpzcUbmKne74B46NfJa9RUFFxCUT48hTSgDrnU96wnCYRdmUUJk36EmcUEZYeQtdsj7ZG72JjiXi6wu222"
    epochPrepAddress shouldEqual "EumuaTPdZCMANkdzhvMZ5J1teAS8Byfewu2V58CEJYRhV7xs1famJz182pe991Xf5CAjHZtqJrwyeQUysCVbYmJGiuC6ezGWcRRgxPtAk2CuYCHF2LbFXQEp5K9AcjUPMTsmRDMdHBnTEqLGmkmv3cTkqjLQNRCdGdXmnGaRCMvWWGTFkEABo5m8QMa1VFFiEpsWtM2BZKchaHCKR19vwjZQKnK4LmbX3WMn1xRyxNj5MMYf3MoSg5wQWU4bU4KzKTFuzNcsTkxeq87N4k6XqsTnikyVZGFct5x6tb6RNYmZfuJhAkfrhXu9FpQakMQBGbiJuWCM2dQ6VbZXUAoasiuGziB5wH52yX8U6P7HW2prYtxj7oMsFE58mPdcUNS4WrG76UVi6XBtiwY5tV4iQqX1f7ebZrZ5UqY2ZyeJ8tZQ9HoQ8xkuE2pusL6nKrSCr55QYzPdVanymN5b83NNKfmCmxbacVZ3WWBiPiWYRmU2zr8LdZyuPz4p3Ruqs54byzqtkhw1Xr1UGaVhqESkTSNuPArjTYB33o3jPCevPtxH8hS55tathATro9DVSNCRxjtLJLjrE4TLSE654m4spwdbQmSCzF615ZESpks89o6VX6MAPmmVNrvm6yv691tCCswbFbyPjQpVtzT6HfQFXv4aFooxLZeQ5V67mGFh9r5bTqgL798347jyDjTz1sbpMhDLgfnrHYwVb5yLiQfAimb2rEeQY6mnbUES17GNvmZNEUiE6ab6itsK9pjq2aum5Cp2DHRjpTcwR6j5LeDFr7vZm8pAQFjJTTt93"
    dataPointAddress shouldEqual "dtoETUwV6a7h8DZZEbMBtX2xbTQstvEjsvaf5TfzFMdd8bsHJNMtQgRKoiesS7q1QGrin2DTD9Gx3gDWCUPf8UZApWiWqX2neuRh5WdxD73sr477Pod7hnfuMBCPKnYFAE7JEwCRHpBrdWNfjCAAcBgvSrk6mc1NhZVfqhn5a15w8A8Mw4XvmHYoN5w2qeZkJnXNrnnsRCc2Aa2HHvweAhZhnN2cJYeVap4Xrhw9CmHY1BzGKUhpxeu6WNsHR532Wen4YqWhWjNQThZHQd2KaTWek1NBUttNi2jQANBf2feuVuzbtCsg6uE9ngf2iPNw1HWgaYw3pnRmqLatAyMktd4KhQgo9dwuNuQyMew1ZHfSeDqKXVTK5KudqT6pxxax67DxbUneQk13K2DzssRBvr4Fn5sxj79RCvcj4ngBxjdyWnPc2o1nJwWByESwmS3eD6nKwNmUXUGbP2QMq1ow28Fp4pTcwR2Jr8eUb1vkVTd351EqR3U1tbYnpNS4weDX7tVYaQ7XARby4zq1Rv6i8SxXN4yD2R2obB9JBm5w6oVfYPdmqVFqQeLTCSmF9xxH1PaEXvjaQsEJGuLrGK44ernZMJBCfdYuz5v8jpBxkWzPYVhqDRWdXpAo9UvJRoUDitZZCH2wuWZHmF2CtEEH"
    poolDepositAddress shouldEqual "3JxtG85ZnbahbGtpAVj7PmhQ6VXzTD5esFNkcgk5Eege5LHXN6X2FmhF2AfAgsVUEgzgH2ZsgTCDvtaHwUm3dgPfz3zruxXnzFtjaEzG9UjRcQBakvBf9dXmQnFF66zUgEp8ubBarbcFYYNfjBdameX2DKHJWy5KikL87V3S1SqkfPga19WwXbBAAtd7sELRu9h2AwskQocmED6u32eEazn6LU14T5t4cyzUf7PWCKPmFobpDv7ikerJ5eHMwDAwTRrwe9V4EZHGcSu79sX8yFnr1vLeKut4EBfmr9hycre8U2M2FrHvYtrSdaDcy14j6LiUafqFtXmLN6M3sQEnaJS3NCQ2f5B2BnsrkYwwUBTknfMbUCJwL2HeokYMf2WscSyBPWTSidgJBfmcopuBJTsBX68yJUxmGunjFbCe6BQ3n5SYbLtKvs1VF8eJC7E7vsUBgxrcLiGeHo2ymzVD7WgH9ojBPf6tU62dbtwDJDD7vy55TtjreH5YJHnkLp1wJQasF2jfGdbpY5Yo4SDbQYFg6sVMh22tZvyuaFxLPEfzxdcv9ToQnA46EPFXpm9rb5hoVQNsgLpm3mHzJeRGnsz9EjHmAxzegQxPbmd5esX7ABLRxVUcHetAUUtnCSPQQNcVdPBp7nWRx8hFurZKmywsuAydPmotBNVUdHn26MXVJTywyusg3EcDrG1tN4ZxawApbGcijA6jFY1w7jqp93eudVZVDZUtZ79McgKq6toMBLxU2sjy94nwrYCJnmnXrysKZFdQuKkUWyBEDhQCfBDt2U8MNXzawrAyBie1MLTd3rqYbJ8LBknW9fBSHjany4PpVt1nqAjzAdSfxjXdjv1usww2z7aC47MwETxKmhzw4Ys1d1DaZKmGQLTEUeSkEJfsxM6bMpgeM9ynViSyAvzoP1wSgScPbGZfYrhpdUoB9kvZ3V71UfPCkdYNgBBzZ34tGnrjKfeRSewbmo9fFAQt3n5istMiRZLm1H"
    epochPrepErgoTree.bytes.encodeHex shouldEqual "10070580dac40904000eca02100e040004000e2012caaacb51c89646fac9a3786eb98d0113bd57d68223ccc11754a4f67281daed0500040004140580dac4090402048092f401040201010402058092f4010400d804d601b2a5730000d602b5db6501fed9010263ed93e4c67202050ec5a7938cb2db63087202730100017302d603b17202d6049db072027303d9010441639a8c720401e4c68c72040206057e720305ea02d1edededededededed93c27201e4c6a7060e917203730493db63087201db6308a793e4c672010405720493e4c6720105049ae4c6a70504730592c17201730693e4c672010405720492c1720199c1a77e9c9a720373077308058cb0720286027309730ad901053c400163d802d6078c720501d6088c72070186029a7208730beded8c72070293c2b2a5720800d0cde4c68c720502040792c1b2a5720800730c02b2ad7202d9010563cde4c672050407730d000414040a040a0408d807d601e4c6a70504d602c1a7d6039272027300d604b2a5730100d605c2a7d606ed93e4c67204060e720593c272047302d6079aa37303eb02eb02d1ededededededed8fa3720191a39a99720173047305720393e4c672040405e4c6a7040593e4c672040504720193db63087204db6308a792c1720472027206d1ededededededed92a37201720393e4c672040405e4c6a7040592e4c672040504720790e4c6720405049a7207730693db63087204db6308a792c1720472027206d1edededed93e4c672040405e4c6a7040593e4c672040504720193c27204720593db63087204db6308a791c172047202"
  }
}
