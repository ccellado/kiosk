package kiosk.oraclepool

import kiosk.ECC
import kiosk.ergo._
import org.scalatest.{Matchers, PropSpec}

class FixedEpochPoolDemo extends PropSpec with FixedEpochPool with Matchers {
  val minBoxValue = 2000000
  override lazy val livePeriod = 5 // blocks
  override lazy val prepPeriod = 5 // blocks
  override lazy val buffer = 4 // blocks

  override lazy val oracleTokenId: Array[Byte] = "12caaacb51c89646fac9a3786eb98d0113bd57d68223ccc11754a4f67281daed".decodeHex
  override lazy val poolTokenId: Array[Byte] = "b662db51cf2dc39f110a021c2a31c74f0a1a18ffffbf73e8a051a7b8c0f09ebc".decodeHex

  override lazy val oracleReward = 2000000 // Nano ergs. One reward per data point to be paid to oracle
  lazy val addresses = Seq(
    "9iHunbPfq8ARpiJXc4vjmwvseeHWjmgeC797vSrdHSLNKxvKsYo",
    "9fj9NJpzo13HfNyCdzyfNP8zAfjiTY3pys1JP5wCzez8MiP8QbF",
    "9ebeQK9oJpDpTZSfqk6wdaHt3x1aUUba9S8dMufTpyQQYvE2XKU",
    "9fcrXXaJgrGKC8iu98Y2spstDDxNccXSR9QjbfTvtuv7vJ3NQLk"
  ).toArray

  override lazy val minPoolBoxValue = oracleReward * (addresses.size + 1) + minBoxValue // how much min must exist in oracle pool box

  property("Display Addresses") {
    println("minPoolBoxValue " + minPoolBoxValue)
    println(s"Live Epoch script length       : ${liveEpochErgoTree.bytes.length}")
    println(s"Live Epoch script complexity   : ${liveEpochErgoTree.complexity}")
    println(s"Epoch prep script length       : ${epochPrepErgoTree.bytes.length}")
    println(s"Epoch prep script complexity   : ${epochPrepErgoTree.complexity}")
    println(s"DataPoint script length        : ${dataPointErgoTree.bytes.length}")
    println(s"DataPoint script complexity    : ${dataPointErgoTree.complexity}")
    println(s"PoolDeposit script length      : ${poolDepositErgoTree.bytes.length}")
    println(s"PoolDeposit script complexity  : ${poolDepositErgoTree.complexity}")

    println("liveEpochAddress: " + liveEpochAddress)
    println("epochPrepAddress: " + epochPrepAddress)
    println("dataPointAddress: " + dataPointAddress)
    println("poolDepositAddress: " + poolDepositAddress)
    println("EpochPrepErgoTree: (for R6) " + KioskErgoTree(epochPrepErgoTree).serialize.encodeHex)

    liveEpochAddress shouldEqual "6By3PvYgScgZTRMU4WghXP3Te4dgS22Es3uWT94RCZG7aastqNDYVE2WVAaVKHUhBJva8d14Xajn9JT8Jy5ZnPoRsFjD4n1Xpep7i6RwYMD4MDKTeoweaR7YeiZGF22tm5pNpKGh6Jb2Z9kH6noczi3cAdr52vp8GEy8edbEmaZtAfvh9m6X5gxEFxeo5DMndV4Pqaj3wwGm5KddCqP4wUfR8hX9BRTj7Eop5D45wGNkHguwfQvyAa43eqnwBdmnYnxVuEqvZu4cq6gJmeEvFCrg843ZtteuDF5Pzhw1vvXb4jQGgi7WfsA6SwT8t8BWyoWYHA1wXCFnAfwgvM5UCAi3184VCZtEWYq98AaqyTYCFFVCrj2z8ZGGpzcUbmKne74B46NfJa9RUFFxCUT48hTSgDrnU96wnCYRdmUUJk36EmcUEZYeQtdsj7ZG72JjiXi6wu222"
    epochPrepAddress shouldEqual "2a2FGvxALCf4uu2XXwvtF5JTJgZYJYmxNRK3Ptwkzt3jN4XLTMjPx3A9XuBQu1RjitYPtTDoNGKYbppunLDzFo9fFKcDP1rFdHpD1DBT3shBk74uzHioTvNbSmkQtVsUdiSwC4dgnYj8CL5zJHNUYs2cyy6Uq4gMB626h3guZLsR67P8jJ3FatWbfiQtMZFcWeATWqBsT8BZLULtSKgRub9SLZMggPqagPiFHu2HLsYvn1jVxbYPK7KGkcRmnLvgvSaphXQUwGhYs2ojzwHfidNLqgPGAb4EuaQSDWz6TD4xYy1XW5cbeVH7DY8sx8Nz6PfFb4yi8SHSwWZKuJTRHZCYL2m5g2hggjX5c7JVBgq3cM9hx8ExDt4vje1zbUN3SsFBvJCp1KJhP5eEJ1sj2Ubne4gPjQxNnJ667N2zbVesjCnrbsMW9jbpyBw1L1EaVQ2xtCnhb2wZGiEsQhPVfQGVhqdBraotvCNnyP4NBoZu8pWwPDqudvbFuhAQAiv6bvn1fm7GyH4eieLaR7ajcw9w4Bo8xQaFuRnwxQwY67ogbVsA6JWqKjrf828BC9P45sCWteqsztTLiqmQkj3MMMpaqdt1q3AoubaYnosvVF8VoNbg15gDBaYpmBXY47BgtNLKCsUXiZdexJmsApry46neR4USWUgBXGDY7MHmwVWCECeEpTnH8zAt8jjcNtiashdoPdqEe2uqryPFSTKtMXBsCYZ4hChxuwgwA3QE7Xh8yjnhb7rg2renotkBz7PLUAoQhPw2uk6DWU1u5F8QvbZJYGXBe1F6rFr9KUCeSAv"
    dataPointAddress shouldEqual "dtoETUwV6a7h8DZZEbMBtX2xbTQstvEjsvaf5TfzFMdd8bsHJNMtQgRKoiesS7q1QGrin2DTD9Gx3gDWCUPf8UZApWiWqX2neuRh5WdxD73sr477Pod7hnfuMBCPKnYFAE7JEwCRHpBrdWNfjCAAcBgvSrk6mc1NhZVfqhn5a15w8A8Mw4XvmHYoN5w2qeZkJnXNrnnsRCc2Aa2HHvweAhZhnN2cJYeVap4Xrhw9CmHY1BzGKUhpxeu6WNsHR532Wen4YqWhWjNQThZHQd2KaTWek1NBUttNi2jQANBf2feuVuzbtCsg6uE9ngf2iPNw1HWgaYw3pnRmqLatAyMktd4KhQgo9dwuNuQyMew1ZHfSeDqKXVTK5KudqT6pxxax67DxbUneQk13K2DzssRBvr4Fn5sxj79RCvcj4ngBxjdyWnPc2o1nJwWByESwmS3eD6nKwNmUXUGbP2QMq1ow28Fp4pTcwR2Jr8eUb1vkVTd351EqR3U1tbYnpNS4weDX7tVYaQ7XARby4zq1Rv6i8SxXN4yD2R2obB9JBm5w6oVfYPdmqVFqQeLTCSmF9xxH1PaEXvjaQsEJGuLrGK44ernZMJBCfdYuz5v8jpBxkWzPYVhqDRWdXpAo9UvJRoUDitZZCH2wuWZHmF2CtEEH"
    poolDepositAddress shouldEqual "G7cP4hAVqpB1QupBfpcoy7GV3iTRJtnirTtLq4Sq65vCJU6tMQmBqsynqF48o9saULr1QAjaPfmjdukX1uiogdCL9rB1Y9x1aSsyVnFKjscxgAarxMZig1VNzBKgFA2Vd5kpHqNPtsmz8y4iv3JnNDCbDhnFLMTkjKd89CmikGUuXPV82c4qF6bufQgNBNu18Duz5iSkFychp9JLvRMfVUKPKfNrEt6FwSCfV3wDFYiZ8QojJSbTNDQaf6WQjkXrgjvJMPwGD4oG9EHXAqUaQbKqezPTDzayFSGTkdf4yaMwmqm6GKGEmh2gTNX26XY3gvs3ScEraGA9yveM728PYtWRkmkxxJTwfvhx5fnHjM942jSuVsWneYdHXs5RGBSqFAo7zfDBLDpjU2z1Zm5TFNgePPrry12hwc2t3H3PgeFNymV6vkrSXu5zDxcX1KVPmtWA7Amqq3URNWKZdkh9gu2DkJTPZn5LF3y7MbNwCeVEfEoM7yWJhYFqv8tTdHVtvq99WjUMFLg4u31wUW1YovCGBBjicBWTzKZ9h89NX78HYcfG36cpuTHcxaVWsTtdbaswwPstXuGP7iQ7ReKzrg68rtnkecQvcdu9qP6nAXS39G2XzMuGt4UicA9Y3vaeCZJ5oibftZezKQJonWGrZLXTsTks9hZ8JYz3JT4uMty3u1oMeasuZzJPaHNKGmqohaiPvcy3K1hNiF5u5rKytW5yhkGwMdFemkBdq3K7BLx6NqPNymXzjfGfwkVDNVm7gKRWSNtL7ToARH3Q4fgpfZWroLSdNeGqof6YqfDtRJhqFHKvfqnzkXY6i84cbxdaDGR644UR8N8tTg9oKEERbXhWq4jpopFaRBSHxWBMvKPFU3fi2eZMR6jvmttV9WmdbFc7cWEXsG5ZL8CxFXVN1TRi41nzqcrnxSoV95oGR4v8RQj6EtXWMNrwkj7vP19iN11agSE84zE91f3X1hTsk6XeyMgzbHMsJcE2KfdYbGt"
    epochPrepErgoTree.bytes.encodeHex shouldEqual "100704000580dac40904140eca02100e040004000e2012caaacb51c89646fac9a3786eb98d0113bd57d68223ccc11754a4f67281daed0500040004140580dac4090402048092f401040201010402058092f4010400d804d601b2a5730000d602b5db6501fed9010263ed93e4c67202050ec5a7938cb2db63087202730100017302d603b17202d6049db072027303d9010441639a8c720401e4c68c72040206057e720305ea02d1edededededededed93c27201e4c6a7060e917203730493db63087201db6308a793e4c672010405720493e4c6720105049ae4c6a70504730592c17201730693e4c672010405720492c1720199c1a77e9c9a720373077308058cb0720286027309730ad901053c400163d802d6078c720501d6088c72070186029a7208730beded8c72070293c2b2a5720800d0cde4c68c720502040792c1b2a5720800730c02b2ad7202d9010563cde4c672050407730d00040a040a0408d806d601b2a5730000d602c67201060ed603e4c6a70504d604c1a7d6059272047301d6069aa3730295e67202d801d607ed93e47202c2a793c272017303eb02d1ededededededed8fa3720391a39a99720373047305720593e4c672010405e4c6a7040593e4c672010504720393db63087201db6308a792c1720172047207d1ededededededed92a37203720593e4c672010405e4c6a7040592e4c672010504720690e4c6720105049a7206730693db63087201db6308a792c1720172047207d1edededed93e4c672010405e4c6a7040593e4c672010504720393c27201c2a793db63087201db6308a791c172017204"
  }
}
